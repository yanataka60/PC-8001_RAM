# PC-8001用増設32KRAMボード

![PC-8001_RAM](https://github.com/yanataka60/PC-8001_RAM/blob/main/jpeg/TITLE.jpg)

　PC-8001の拡張端子に接続することで裏RAMとして使えるようになる32K増設RAMボードです。

　50Pinフラットケーブルで接続することで汎用的にも使えますが、PC-8001_SD Rev1.4に載せて使えばケーブルもいらずにコンパクトに装着できます。

　I/OポートE2hへの書込み、RAMの読み書き制御はGAL22V10が行っていますが、I/OポートE2hからの読込は対応していません。

　所有している増設RAMを必要とするゲームで試した限りではI/OポートE2hからの読込を必要としているゲームはなく、問題なく動作しました。

|名称|作者|
| ------------ | ------------ |
|AlphaDemo E2h版|きらびぃ様|
|194n|tako2様|
|New CITY HERO|内藤 時浩様|

　すべてのアプリケーション、ゲームで試したわけではないのでI/OポートE2hからの読込を必須としているものがあるかもしれませんが、I/OポートE2hからの読込対応は今のところ考えていません。

　なお、ROMDS0、ROMDS1、ROMDS2、ROMDS3信号線をまとめて制御する仕様のため、ちくらっぺさん作8kBSRAMボードとの併用はできません。

#### 2026.1.15追記 PC-8001本体との相性の悪さの原因が特定できました。一カ所のパターンカットで直ります。後述「Rev1.3基板におけるパターンカット個所」を参照してください。

## 回路図
　KiCadフォルダ内のPC-8001_RAM.pdfを参照してください。

#### 最新版はRev1.4であり、回路図・基板データはRev1.4に更新していますが、基板の紹介用画像には旧基板の画像を掲載している個所があります。順次更新しますのでご容赦ください。

[回路図](https://github.com/yanataka60/PC-8001_RAM/blob/main/Kicad/PC-8001_RAM.pdf)

![PC-8001_RAM](https://github.com/yanataka60/PC-8001_RAM/blob/main/Kicad/PC-8001_RAM_1.jpg)

## 部品
|番号|品名|数量|備考|
| ------------ | ------------ | ------------ | ------------ |
|J1|2x25ボックスヘッダ|1|共立エレショップ JS-1200R-50など、秋月電子通商 PH-2x40RGなどのピンヘッダでも代用可(注1)|
|J2|2x25ピンソケット|1|秋月電子通商 FH-2X25SG又はFHU-2x42SGなど|
|U1|GAL22V10|1||
||U2、U3のいずれか|||
|U2|SRAM 62256相当品|1|600mil(注2)|
|U3|SRAM CY7C199相当品|1|300mil(注2)|
|U4|74LS04|1||
|C1,C2,C4|積層セラミックコンデンサ 0.1uF|3||
|C3|電解コンデンサ 16v100uF|1||
|D1|5mm赤色LED|1|秋月電子通商 OSDR5113Aなど|
|D1|5mm緑色LED|1|秋月電子通商 OSPG5111Aなど|
|R1,R2|カーボン抵抗 330Ω|2||

　　　注1)ピンヘッダで代用するときは、基板から若干浮かせてピンヘッダをハンダ付けするとフラットケーブをスムーズに抜き差しできます。

　　　注2)U2(600mil対応)又はU3(300mil対応)のどちらか入手しやすいSRAMを使ってください。

## GALへの書込み
　Wincuplフォルダ内のRAMBORAD.jedをROMライター(TL866II Plus等)を使ってGAL22V10に書き込みます。

## 組み立ての注意点
　J2のピンソケットは基板の裏側から取り付けます。J1のボックスヘッダを取り付けるときは表側に取り付けます。

　画像ではテストのためJ1、J2の両方を取り付けていますが、どちらか接続に使用するほうだけの取付で構いません。

　SRAMは600mil、300milのどちらかを使います。画像ではテストのためU2(600mil)、U3(300mil)の両方にICソケットを取り付けていますが、使用するRAMに合わせてどちらかの取付で構いません。

　SRAM 62256相当品

![62256](https://github.com/yanataka60/PC-8001_RAM/blob/main/jpeg/PC-8001RAM(3).JPG)

　SRAM CY7C199相当品

![CY7C199](https://github.com/yanataka60/PC-8001_RAM/blob/main/jpeg/CY7C199.JPG)

## 接続
　PC-8001_SD Rev1.4に載せる場合は、PC-8001_RAMのJ2ピンソケットをPC-8001_SD Rev1.4のJ5ピンヘッダにそのままはめるだけです。

![Rev1.4](https://github.com/yanataka60/PC-8001_RAM/blob/main/jpeg/PC-8001RAM(3).JPG)

　フラットケーブルで接続するときはボックスヘッダの1Pinマーク(基板の「J1」と書かれたマーク)を目印にしてフラットケーブルを接続します。

![フラットケーブル](https://github.com/yanataka60/PC-8001_RAM/blob/main/jpeg/FLAT%20CABLE.JPG)

## RAMのテスト
　RAMCHECKフォルダ内のramcheck.cmtを読み込み実行してください。0000h～7FFFhまでのRAMをCHECKできます。

#### 　2025.9.11 TL866ⅡPLUSで「Addr.Bus Open Circuit Test Error!」となる個体を発見できるよう改良しました。

## Rev1.3基板におけるパターンカット個所
　Rev1.3までの回路においてRAMの書込み信号線の名称を安易に「~WE」としたため、PC-8001拡張端子の「~WE」と同名となりPC-8001本体との相性を引き起こしていました。

　Rev1.3基板を修正するには画像の赤丸で囲んだ一カ所をパターンカットしてください。

![パターンカット1](https://github.com/yanataka60/PC-8001_RAM/blob/main/jpeg/CUT1.JPG)

![パターンカット2](https://github.com/yanataka60/PC-8001_RAM/blob/main/jpeg/CUT2.JPG)

## 初期3基板におけるパターンカット個所
　初期基板を修正するには基板裏面画像の赤丸で囲んだ一カ所をパターンカットしてください。

![パターンカット3](https://github.com/yanataka60/PC-8001_RAM/blob/main/jpeg/CUT3.JPG)

## 追記
2025.8.31 ちくらっぺさん作8kBSRAMボードとの併用は出来ないことの追記及びRAMテストプログラムの追加。

2025.9.11 TL866ⅡPLUSで「Addr.Bus Open Circuit Test Error!」となる個体を発見できるよう改良。

2025.11.11 GAL22V10とPC-8001本体との相性により動作不良が起こる場合があるので74LS04を追加。

2026.1.15 不調の原因と思われる回路の誤りを修正、基板を更新、また旧基板を修正するためのパターンカットの仕方を追加。

     謝辞:不調原因の特定にあたり、くぼちゃん様のご協力をいただきました。ありがとうございました。

2026.1.16 初期基板のパターンカット個所を追記。
